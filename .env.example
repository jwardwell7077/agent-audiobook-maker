# ABM Two-Agent System Environment Configuration
# Copy this file to .env for local development

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Connection
DATABASE_URL=postgresql://abm_user:abm_dev_password@localhost:5432/audiobook_maker
DB_HOST=localhost
DB_PORT=5432
DB_NAME=audiobook_maker
DB_USER=abm_user
DB_PASSWORD=abm_dev_password

# =============================================================================
# OLLAMA/LLM CONFIGURATION
# =============================================================================

# Ollama API Configuration (native installation)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_HOST=localhost
OLLAMA_PORT=11434

# Default models for dialogue classification
OLLAMA_PRIMARY_MODEL=llama3.1:8b-instruct-q4_k_m
OLLAMA_FALLBACK_MODEL=phi3:mini
OLLAMA_DIALOGUE_MODEL=llama3.1:8b-instruct-q4_k_m

# AI Classification Settings
AI_CLASSIFICATION_TIMEOUT=30
AI_CLASSIFICATION_MAX_RETRIES=3
CLASSIFICATION_CONFIDENCE_THRESHOLD=0.7

# =============================================================================
# TWO-AGENT SYSTEM CONFIGURATION  
# =============================================================================

# Agent 1: Dialogue Classifier Settings
DIALOGUE_CLASSIFIER_USE_AI_FALLBACK=true
DIALOGUE_CLASSIFIER_HEURISTIC_CONFIDENCE_MIN=0.8
DIALOGUE_CLASSIFIER_CONTEXT_WINDOW_SIZE=5

# Agent 2: Speaker Attribution Settings
SPEAKER_ATTRIBUTION_CONFIDENCE_MIN=0.6
SPEAKER_ATTRIBUTION_CREATE_NEW_CHARACTERS=true
SPEAKER_ATTRIBUTION_MAX_ALIASES_PER_CHARACTER=10

# =============================================================================
# DATA PATHS AND STORAGE
# =============================================================================

# Base data directory
DATA_BASE_PATH=./data

# Specific data paths
DATA_BOOKS_PATH=./data/books
DATA_ANNOTATIONS_PATH=./data/annotations
DATA_CLEAN_PATH=./data/clean
DATA_CHARACTERS_PATH=./data/characters

# Output file settings
OUTPUT_FORMAT=jsonl
OUTPUT_INCLUDE_CONFIDENCE=true
OUTPUT_INCLUDE_METADATA=true

# =============================================================================
# LANGFLOW INTEGRATION
# =============================================================================

# LangFlow API settings (when using LangFlow)
LANGFLOW_BASE_URL=http://localhost:7860
LANGFLOW_API_KEY=
LANGFLOW_FLOW_ID=

# Component settings
LANGFLOW_COMPONENT_TIMEOUT=60
LANGFLOW_MAX_CONCURRENT_FLOWS=3

# =============================================================================
# LOGGING AND DEBUGGING
# =============================================================================

# Logging configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=./logs/abm-agents.log

# Debug settings
DEBUG_MODE=false
DEBUG_SAVE_INTERMEDIATE_RESULTS=false
DEBUG_LOG_API_CALLS=false

# Performance monitoring
ENABLE_METRICS=true
METRICS_PORT=8090

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development flags
DEV_MODE=true
DEV_USE_SAMPLE_DATA=false
DEV_SKIP_AI_CALLS=false
DEV_MOCK_RESPONSES=false

# Testing configuration
TEST_DATA_PATH=./tests/data
TEST_OUTPUT_PATH=./tests/output

# =============================================================================
# PRODUCTION OVERRIDES (uncomment for production)
# =============================================================================

# Production database (override for production)
# DATABASE_URL=postgresql://prod_user:secure_password@prod_host:5432/audiobook_maker_prod

# Production Ollama (if using remote Ollama)
# OLLAMA_BASE_URL=http://ollama-server:11434

# Production logging
# LOG_LEVEL=WARN
# DEBUG_MODE=false
# DEV_MODE=false
