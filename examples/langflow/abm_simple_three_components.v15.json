{
  "data": {
    "edges": [
      {
        "className": "",
        "data": {
          "sourceHandle": {
            "dataType": "Data",
            "fieldName": "aggregated_results",
            "id": "aggregated_results",
            "output_types": [
              "Data"
            ]
          },
          "targetHandle": {
            "dataType": "Data",
            "fieldName": "aggregated_results",
            "id": "aggregated_results",
            "input_types": [
              "Data"
            ],
            "output_types": [
              "Data"
            ]
          }
        },
        "id": "edge-runner-to-normalizer",
        "selected": false,
        "source": "ABMTwoAgentRunner-NODE1",
        "sourceHandle": "aggregated_results",
        "target": "ABMResultsToUtterances-NODE2",
        "targetHandle": "aggregated_results",
        "type": "default"
      },
      {
        "className": "",
        "data": {
          "sourceHandle": {
            "dataType": "Data",
            "fieldName": "utterances_data",
            "id": "utterances_data",
            "output_types": [
              "Data"
            ]
          },
          "targetHandle": {
            "dataType": "Data",
            "fieldName": "utterances_data",
            "id": "utterances_data",
            "input_types": [
              "Data"
            ],
            "output_types": [
              "Data"
            ]
          }
        },
        "id": "edge-normalizer-to-writer",
        "selected": false,
        "source": "ABMResultsToUtterances-NODE2",
        "sourceHandle": "utterances_data",
        "target": "ABMAggregatedJsonlWriter-NODE3",
        "targetHandle": "utterances_data",
        "type": "default"
      }
    ],
    "nodes": [
      {
        "data": {
          "id": "ABMTwoAgentRunner-NODE1",
          "node": {
            "base_classes": [],
            "beta": false,
            "conditional_paths": [],
            "custom_fields": {},
            "description": "Run the end-to-end two-agent pipeline for a chapter",
            "display_name": "ABM Two-Agent Runner",
            "documentation": "Executes: Enhanced Loader → Block Iterator → Dialogue Classifier → Speaker Attribution → Aggregator",
            "edited": false,
            "field_order": [
              "book",
              "chapter",
              "base_dir",
              "batch_size",
              "start_block",
              "max_blocks",
              "dialogue_priority"
            ],
            "frozen": false,
            "icon": "play",
            "legacy": false,
            "metadata": {},
            "minimized": false,
            "output_types": [],
            "outputs": [
              {
                "allows_loop": false,
                "cache": true,
                "display_name": "Aggregated Results",
                "group_outputs": false,
                "method": "execute_pipeline",
                "name": "aggregated_results",
                "selected": "Data",
                "tool_mode": true,
                "types": [
                  "Data"
                ],
                "value": "__UNDEFINED__"
              }
            ],
            "pinned": false,
            "template": {
              "_type": "Component",
              "base_dir": {
                "_input_type": "MessageTextInput",
                "advanced": false,
                "display_name": "Repo Root (optional)",
                "dynamic": false,
                "info": "Leave empty to auto-detect repo root",
                "list": false,
                "name": "base_dir",
                "placeholder": "",
                "required": false,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_metadata": true,
                "type": "str",
                "value": ""
              },
              "batch_size": {
                "_input_type": "IntInput",
                "advanced": false,
                "display_name": "Batch Size",
                "dynamic": false,
                "info": "Blocks per batch",
                "list": false,
                "name": "batch_size",
                "placeholder": "",
                "required": false,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_metadata": true,
                "type": "int",
                "value": 10
              },
              "book": {
                "_input_type": "MessageTextInput",
                "advanced": false,
                "display_name": "Book Key",
                "dynamic": false,
                "info": "Book folder under data/clean",
                "list": false,
                "name": "book",
                "placeholder": "mvs",
                "required": true,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_metadata": true,
                "type": "str",
                "value": "mvs"
              },
              "chapter": {
                "_input_type": "IntInput",
                "advanced": false,
                "display_name": "Chapter (1-based)",
                "dynamic": false,
                "info": "Chapter index",
                "list": false,
                "name": "chapter",
                "placeholder": "1",
                "required": true,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_metadata": true,
                "type": "int",
                "value": 1
              },
              "dialogue_priority": {
                "_input_type": "BoolInput",
                "advanced": false,
                "display_name": "Dialogue Priority",
                "dynamic": false,
                "info": "Process dialogue-first",
                "list": false,
                "name": "dialogue_priority",
                "placeholder": "",
                "required": false,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_metadata": true,
                "type": "bool",
                "value": true
              },
              "max_blocks": {
                "_input_type": "IntInput",
                "advanced": false,
                "display_name": "Max Blocks (0=all)",
                "dynamic": false,
                "info": "Limit processed blocks",
                "list": false,
                "name": "max_blocks",
                "placeholder": "0",
                "required": false,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_metadata": true,
                "type": "int",
                "value": 10
              },
              "start_block": {
                "_input_type": "IntInput",
                "advanced": false,
                "display_name": "Start Block",
                "dynamic": false,
                "info": "First block id",
                "list": false,
                "name": "start_block",
                "placeholder": "1",
                "required": false,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_metadata": true,
                "type": "int",
                "value": 1
              }
            },
            "tool_mode": false
          },
          "showNode": true,
          "type": "ABMTwoAgentRunner"
        },
        "id": "ABMTwoAgentRunner-NODE1",
        "measured": {
          "height": 300,
          "width": 360
        },
        "position": {
          "x": 40,
          "y": 180
        },
        "selected": false,
        "type": "genericNode"
      },
      {
        "data": {
          "id": "ABMResultsToUtterances-NODE2",
          "node": {
            "base_classes": [],
            "beta": false,
            "conditional_paths": [],
            "custom_fields": {},
            "description": "Normalize aggregated results into standard utterances schema",
            "display_name": "ABM Results → Utterances",
            "documentation": "Takes aggregated two-agent results and emits `utterances` list",
            "edited": false,
            "field_order": [
              "aggregated_results"
            ],
            "frozen": false,
            "icon": "table",
            "legacy": false,
            "metadata": {},
            "minimized": false,
            "output_types": [],
            "outputs": [
              {
                "allows_loop": false,
                "cache": true,
                "display_name": "Utterances Data",
                "group_outputs": false,
                "method": "to_utterances",
                "name": "utterances_data",
                "selected": "Data",
                "tool_mode": true,
                "types": [
                  "Data"
                ],
                "value": "__UNDEFINED__"
              }
            ],
            "pinned": false,
            "template": {
              "_type": "Component",
              "aggregated_results": {
                "_input_type": "DataInput",
                "advanced": false,
                "display_name": "Aggregated Results",
                "dynamic": false,
                "info": "Output of ABM Two-Agent Runner",
                "input_types": [
                  "Data"
                ],
                "list": false,
                "name": "aggregated_results",
                "placeholder": "",
                "required": true,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_input": true,
                "trace_as_metadata": true,
                "type": "other",
                "value": ""
              }
            },
            "tool_mode": false
          },
          "showNode": true,
          "type": "ABMResultsToUtterances"
        },
        "id": "ABMResultsToUtterances-NODE2",
        "measured": {
          "height": 200,
          "width": 320
        },
        "position": {
          "x": 460,
          "y": 190
        },
        "selected": false,
        "type": "genericNode"
      },
      {
        "data": {
          "id": "ABMAggregatedJsonlWriter-NODE3",
          "node": {
            "base_classes": [
              "Data"
            ],
            "beta": false,
            "conditional_paths": [],
            "custom_fields": {},
            "description": "Write normalized utterances to JSONL with sidecar metadata",
            "display_name": "ABM Aggregated JSONL Writer",
            "documentation": "Writes to JSONL and a .meta.json file",
            "edited": false,
            "field_order": [
              "utterances_data",
              "output_path"
            ],
            "frozen": false,
            "icon": "file-output",
            "legacy": false,
            "metadata": {},
            "minimized": false,
            "output_types": [],
            "outputs": [
              {
                "allows_loop": false,
                "cache": true,
                "display_name": "Write Result",
                "group_outputs": false,
                "method": "write",
                "name": "write_result",
                "selected": "Data",
                "tool_mode": true,
                "types": [
                  "Data"
                ],
                "value": "__UNDEFINED__"
              }
            ],
            "pinned": false,
            "template": {
              "_type": "Component",
              "output_path": {
                "_input_type": "StrInput",
                "advanced": false,
                "display_name": "Output Path",
                "dynamic": false,
                "info": "e.g., output/utterances.jsonl",
                "list": false,
                "load_from_db": false,
                "name": "output_path",
                "placeholder": "output/utterances.jsonl",
                "required": true,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_metadata": true,
                "type": "str",
                "value": "output/utterances.jsonl"
              },
              "utterances_data": {
                "_input_type": "DataInput",
                "advanced": false,
                "display_name": "Utterances Data",
                "dynamic": false,
                "info": "From Results → Utterances",
                "input_types": [
                  "Data"
                ],
                "list": false,
                "name": "utterances_data",
                "placeholder": "",
                "required": true,
                "show": true,
                "title_case": false,
                "tool_mode": false,
                "trace_as_input": true,
                "trace_as_metadata": true,
                "type": "other",
                "value": ""
              }
            },
            "tool_mode": false
          },
          "showNode": true,
          "type": "ABMAggregatedJsonlWriter"
        },
        "id": "ABMAggregatedJsonlWriter-NODE3",
        "measured": {
          "height": 262,
          "width": 320
        },
        "position": {
          "x": 840,
          "y": 190
        },
        "selected": false,
        "type": "genericNode"
      }
    ],
    "viewport": {
      "x": 0,
      "y": 0,
      "zoom": 1
    }
  },
  "description": "Simple 3-component pipeline: Two-Agent Runner → Utterances → JSONL",
  "endpoint_name": null,
  "id": "abm_simple_three_components_v15",
  "is_component": false,
  "last_tested_version": "1.5.0.post2",
  "name": "ABM Simple 3 Components (v1.5)",
  "tags": [
    "abm",
    "jsonl"
  ]
}