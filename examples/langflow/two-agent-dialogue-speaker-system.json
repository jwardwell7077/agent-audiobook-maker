{
    "data": {
        "edges": [
            {
                "className": "",
                "data": {
                    "targetHandle": {
                        "dataType": "Data",
                        "id": "classified_utterance",
                        "input_types": [
                            "Data"
                        ],
                        "output_types": [
                            "Data"
                        ],
                        "fieldName": "classified_utterance"
                    },
                    "sourceHandle": {
                        "dataType": "Data",
                        "id": "classified_utterance",
                        "output_types": [
                            "Data"
                        ],
                        "fieldName": "classified_utterance"
                    }
                },
                "id": "agent1-to-agent2",
                "selected": false,
                "source": "agent1-dialogue-classifier",
                "sourceHandle": "classified_utterance",
                "target": "agent2-speaker-attribution",
                "targetHandle": "classified_utterance",
                "type": "default"
            }
        ],
        "nodes": [
            {
                "data": {
                    "type": "ABMDialogueClassifier",
                    "node": {
                        "display_name": "Agent 1: Dialogue Classifier",
                        "description": "Classify utterances as dialogue vs. narration using hybrid detection",
                        "base_classes": [
                            "ABMDialogueClassifier"
                        ],
                        "template": {
                            "utterance_text": {
                                "display_name": "Utterance Text",
                                "info": "The text utterance to classify",
                                "type": "str",
                                "value": "\"Hello there!\" John said with a smile."
                            },
                            "book_id": {
                                "display_name": "Book ID",
                                "info": "Book identifier",
                                "type": "str",
                                "value": "lord_of_flies"
                            },
                            "chapter_id": {
                                "display_name": "Chapter ID",
                                "info": "Chapter identifier",
                                "type": "str",
                                "value": "chapter_1"
                            },
                            "utterance_idx": {
                                "display_name": "Utterance Index",
                                "info": "0-based index of utterance in chapter",
                                "type": "int",
                                "value": 0
                            },
                            "context_before": {
                                "display_name": "Context Before",
                                "info": "Text context before the utterance",
                                "type": "str",
                                "value": "The boys gathered around the fire pit."
                            },
                            "context_after": {
                                "display_name": "Context After",
                                "info": "Text context after the utterance",
                                "type": "str",
                                "value": "The other boys nodded in agreement."
                            },
                            "min_confidence": {
                                "display_name": "Minimum Confidence",
                                "info": "Minimum confidence threshold for AI classification",
                                "type": "float",
                                "value": 0.7
                            },
                            "ai_classification_enabled": {
                                "display_name": "AI Classification Enabled",
                                "info": "Enable Ollama AI fallback for uncertain cases",
                                "type": "bool",
                                "value": true
                            },
                            "ollama_model": {
                                "display_name": "Ollama Model",
                                "info": "Model to use for AI classification",
                                "type": "str",
                                "value": "llama3.2:1b"
                            },
                            "debug_mode": {
                                "display_name": "Debug Mode",
                                "info": "Enable detailed debug logging",
                                "type": "bool",
                                "value": false
                            }
                        }
                    },
                    "id": "agent1-dialogue-classifier"
                },
                "id": "agent1-dialogue-classifier",
                "position": {
                    "x": 100,
                    "y": 200
                },
                "type": "genericNode"
            },
            {
                "data": {
                    "type": "ABMSpeakerAttribution",
                    "node": {
                        "display_name": "Agent 2: Speaker Attribution",
                        "description": "Identify speakers in dialogue and build character voice profiles",
                        "base_classes": [
                            "ABMSpeakerAttribution"
                        ],
                        "template": {
                            "classified_utterance": {
                                "display_name": "Classified Utterance",
                                "info": "Output from Agent 1 (ABM Dialogue Classifier)",
                                "type": "str",
                                "value": ""
                            },
                            "dialogue_text": {
                                "display_name": "Dialogue Text",
                                "info": "The actual dialogue text to analyze",
                                "type": "str",
                                "value": "Hello there!"
                            },
                            "book_id": {
                                "display_name": "Book ID",
                                "info": "Book identifier",
                                "type": "str",
                                "value": "lord_of_flies"
                            },
                            "chapter_id": {
                                "display_name": "Chapter ID",
                                "info": "Chapter identifier",
                                "type": "str",
                                "value": "chapter_1"
                            },
                            "context_before": {
                                "display_name": "Context Before",
                                "info": "Text context before the utterance",
                                "type": "str",
                                "value": "The boys gathered around the fire pit."
                            },
                            "context_after": {
                                "display_name": "Context After",
                                "info": "Text context after the utterance",
                                "type": "str",
                                "value": "The other boys nodded in agreement."
                            },
                            "attribution_method": {
                                "display_name": "Attribution Method",
                                "info": "Which attribution methods to use",
                                "type": "str",
                                "options": [
                                    "all",
                                    "direct_only",
                                    "contextual_only",
                                    "flow_only"
                                ],
                                "value": "all"
                            },
                            "min_confidence": {
                                "display_name": "Minimum Confidence",
                                "info": "Minimum confidence threshold for attribution (0.0-1.0)",
                                "type": "float",
                                "value": 0.3
                            },
                            "create_new_characters": {
                                "display_name": "Create New Characters",
                                "info": "Allow creation of new character profiles",
                                "type": "bool",
                                "value": true
                            },
                            "update_profiles": {
                                "display_name": "Update Profiles",
                                "info": "Enable character profile updates",
                                "type": "bool",
                                "value": true
                            }
                        }
                    },
                    "id": "agent2-speaker-attribution"
                },
                "id": "agent2-speaker-attribution",
                "position": {
                    "x": 500,
                    "y": 200
                },
                "type": "genericNode"
            },
            {
                "data": {
                    "type": "TextInput",
                    "node": {
                        "display_name": "Sample Text Input",
                        "description": "Input text for testing the two-agent system",
                        "template": {
                            "value": {
                                "display_name": "Input Text",
                                "info": "Text to process through the two-agent system",
                                "type": "str",
                                "value": "\"We need to make a fire,\" Ralph said firmly. \"The smoke will help rescuers find us.\""
                            }
                        }
                    },
                    "id": "text-input"
                },
                "id": "text-input",
                "position": {
                    "x": -200,
                    "y": 200
                },
                "type": "genericNode"
            },
            {
                "data": {
                    "type": "TextOutput",
                    "node": {
                        "display_name": "Final Output",
                        "description": "Final processed output with speaker attribution",
                        "template": {
                            "input_value": {
                                "display_name": "Speaker Attribution Result",
                                "info": "Final result from Agent 2 with speaker identification",
                                "type": "str"
                            }
                        }
                    },
                    "id": "text-output"
                },
                "id": "text-output",
                "position": {
                    "x": 800,
                    "y": 200
                },
                "type": "genericNode"
            }
        ],
        "viewport": {
            "x": 0,
            "y": 0,
            "zoom": 1
        }
    },
    "description": "Two-Agent Character Tracking System: Agent 1 classifies dialogue vs. narration, Agent 2 identifies speakers and builds voice profiles for audiobook casting.",
    "name": "Two-Agent Dialogue Speaker System",
    "last_tested_version": "1.1.0",
    "endpoint_name": "two-agent-system"
}