{
    "data": {
        "edges": [
            {
                "id": "runner-to-normalizer",
                "source": "abm-two-agent-runner",
                "target": "abm-results-to-utterances",
                "sourceHandle": "aggregated_results",
                "targetHandle": "aggregated_results",
                "data": {},
                "type": "default"
            },
            {
                "id": "normalizer-to-writer",
                "source": "abm-results-to-utterances",
                "target": "abm-aggregated-writer",
                "sourceHandle": "utterances_data",
                "targetHandle": "utterances_data",
                "data": {},
                "type": "default"
            },
            {
                "id": "writer-to-output",
                "source": "abm-aggregated-writer",
                "target": "final-output",
                "sourceHandle": "write_result",
                "targetHandle": "input_value",
                "data": {},
                "type": "default"
            }
        ],
        "nodes": [
            {
                "id": "info-panel",
                "type": "customNode",
                "position": {
                    "x": 40,
                    "y": 20
                },
                "data": {
                    "type": "TextOutput",
                    "node": {
                        "template": {
                            "input_value": {
                                "display_name": "Flow Info",
                                "type": "str",
                                "value": "ABM Two-Agent Runner ‚Üí Utterances ‚Üí JSONL\nImports: ABMTwoAgentRunner, ABM Results ‚Üí Utterances, ABM Aggregated JSONL Writer"
                            }
                        },
                        "display_name": "‚ÑπÔ∏è About This Flow",
                        "description": "Runs the two-agent pipeline for a chapter and writes utterances JSONL"
                    }
                }
            },
            {
                "id": "abm-two-agent-runner",
                "type": "customNode",
                "position": {
                    "x": 60,
                    "y": 220
                },
                "data": {
                    "type": "ABMTwoAgentRunner",
                    "node": {
                        "base_classes": [
                            "ABMTwoAgentRunner"
                        ],
                        "template": {
                            "book": {
                                "display_name": "Book Key",
                                "type": "str",
                                "value": "mvs"
                            },
                            "chapter": {
                                "display_name": "Chapter (1-based)",
                                "type": "int",
                                "value": 1
                            },
                            "base_dir": {
                                "display_name": "Repo Root (optional)",
                                "type": "str",
                                "value": ""
                            },
                            "batch_size": {
                                "display_name": "Batch Size",
                                "type": "int",
                                "value": 10
                            },
                            "start_block": {
                                "display_name": "Start Block",
                                "type": "int",
                                "value": 1
                            },
                            "max_blocks": {
                                "display_name": "Max Blocks (0=all)",
                                "type": "int",
                                "value": 10
                            },
                            "dialogue_priority": {
                                "display_name": "Dialogue Priority",
                                "type": "bool",
                                "value": true
                            }
                        },
                        "display_name": "‚ñ∂Ô∏è ABM Two-Agent Runner",
                        "description": "Execute the end-to-end pipeline for one chapter"
                    }
                }
            },
            {
                "id": "abm-results-to-utterances",
                "type": "customNode",
                "position": {
                    "x": 420,
                    "y": 220
                },
                "data": {
                    "type": "ABMResultsToUtterances",
                    "node": {
                        "base_classes": [
                            "ABMResultsToUtterances"
                        ],
                        "template": {
                            "aggregated_results": {
                                "display_name": "Aggregated Results",
                                "type": "Data"
                            }
                        },
                        "display_name": "ABM Results ‚Üí Utterances",
                        "description": "Normalize aggregated results into utterances list"
                    }
                }
            },
            {
                "id": "abm-aggregated-writer",
                "type": "customNode",
                "position": {
                    "x": 760,
                    "y": 220
                },
                "data": {
                    "type": "ABMAggregatedJsonlWriter",
                    "node": {
                        "base_classes": [
                            "ABMAggregatedJsonlWriter"
                        ],
                        "template": {
                            "utterances_data": {
                                "display_name": "Utterances Data",
                                "type": "Data"
                            },
                            "output_path": {
                                "display_name": "Output Path",
                                "type": "str",
                                "value": "output/utterances.jsonl"
                            }
                        },
                        "display_name": "üíæ ABM Aggregated JSONL Writer",
                        "description": "Write utterances to JSONL (+ sidecar meta)"
                    }
                }
            },
            {
                "id": "final-output",
                "type": "customNode",
                "position": {
                    "x": 1080,
                    "y": 220
                },
                "data": {
                    "type": "TextOutput",
                    "node": {
                        "base_classes": [
                            "TextOutput"
                        ],
                        "template": {
                            "input_value": {
                                "display_name": "Write Result",
                                "type": "str"
                            }
                        },
                        "display_name": "üìÑ Write Result",
                        "description": "Displays writer output (path + count)"
                    }
                }
            }
        ],
        "viewport": {
            "x": 0,
            "y": 0,
            "zoom": 0.9
        }
    },
    "description": "Two-Agent chapter processing to JSONL using ABMTwoAgentRunner.",
    "name": "ABM Two-Agent ‚Üí JSONL",
    "last_tested_version": "1.1.0",
    "endpoint_name": "abm_two_agent_jsonl"
}