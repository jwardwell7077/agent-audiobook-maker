{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "seedpack.schema.json",
  "$defs": {
    "file_record": {
      "type": "object",
      "required": [
        "file",
        "module",
        "summary",
        "public_api",
        "cli",
        "io_contracts",
        "errors_raised",
        "dependencies",
        "evidence",
        "confidence"
      ],
      "properties": {
        "file": {
          "type": "string"
        },
        "module": {
          "type": "string"
        },
        "summary": {
          "type": "string"
        },
        "public_api": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "cli": {
          "type": "object"
        },
        "io_contracts": {
          "type": "object"
        },
        "errors_raised": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "dependencies": {
          "type": "object"
        },
        "evidence": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      }
    },
    "module_record": {
      "type": "object",
      "required": [
        "id",
        "path_globs",
        "purpose",
        "key_components",
        "public_surfaces",
        "data_flow",
        "dependencies",
        "configs_env",
        "cli_entrypoints",
        "invariants",
        "edge_cases",
        "status"
      ],
      "properties": {
        "id": {
          "type": "string"
        },
        "path_globs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "purpose": {
          "type": "string"
        },
        "key_components": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "public_surfaces": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "data_flow": {
          "type": "string"
        },
        "dependencies": {
          "type": "object"
        },
        "configs_env": {
          "type": "object"
        },
        "cli_entrypoints": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "invariants": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "edge_cases": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "status": {
          "type": "object"
        }
      }
    },
    "cli_tools": {
      "type": "array",
      "items": {
        "type": "object"
      }
    },
    "env_vars": {
      "type": "array",
      "items": {
        "type": "object"
      }
    },
    "config_files": {
      "type": "array",
      "items": {
        "type": "object"
      }
    },
    "import_graph": {
      "type": "object",
      "required": [
        "nodes",
        "edges"
      ],
      "properties": {
        "nodes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "edges": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "from",
              "to"
            ],
            "properties": {
              "from": {
                "type": "string"
              },
              "to": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "call_graph": {
      "type": "object",
      "required": [
        "edges"
      ],
      "properties": {
        "edges": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "from",
              "to"
            ],
            "properties": {
              "from": {
                "type": "string"
              },
              "to": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "index": {
      "type": "object",
      "required": [
        "project",
        "generated_at",
        "code_root",
        "modules",
        "files_indexed",
        "graphs",
        "inventories",
        "decisions",
        "schemas_index",
        "schema_version",
        "shards"
      ],
      "properties": {
        "project": {
          "type": "string"
        },
        "generated_at": {
          "type": "string"
        },
        "code_root": {
          "type": "string"
        },
        "modules": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "files_indexed": {
          "type": "integer"
        },
        "graphs": {
          "type": "object"
        },
        "inventories": {
          "type": "object"
        },
        "decisions": {
          "type": "object"
        },
        "schemas_index": {
          "type": "string"
        },
        "schema_version": {
          "type": "string"
        },
        "shards": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "schemas_index": {
      "type": "object",
      "required": [
        "schemas"
      ],
      "properties": {
        "schemas": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "name",
              "path",
              "inferred"
            ],
            "properties": {
              "name": {
                "type": "string"
              },
              "path": {
                "type": "string"
              },
              "inferred": {
                "type": "boolean"
              }
            }
          }
        }
      }
    }
  }
}